{% extends 'base.html' %}
{% load static %}

{% block content %}

{% if message %}
  <div class="alert alert-success" role="alert">
    {{ message }}
  </div>
{% endif %}

<h2>List of movies</h2>
<div class="d-flex mt-4">
  <div class="container d-flex flex-wrap justify-content-center mr-3">
    {% for movie in movies %}
      <div class="card m-1" style="width: 80%;">
        <div class="d-flex justify-content-between">
          <div class="container m-2" style="width: 70%">
            <h5 class="card-title">{{ movie.title }} </h5>
            <h6 class="card-subtitle mb-2 text-muted">{{ movie.year }}</h6>
            <p class="card-text">{{ movie.description }}</p>
            <a href="{% url 'movie' movie.id %}"><button type="button" class="btn btn-primary">Szczegóły</button></a>
          </div>
          <div class="" style="width: 30%">
            <img class="" src="/media/{{ movie.cover }}" alt="Card image cap" style="width: 100%; height:100%">
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% if user.is_authenticated %}
  <div class="container ml-3" style="width: 30%">
    <form class="" action="" method="POST">
      {% csrf_token %}
      <label for="title" class="form-label">Title:</label>
      <input type="text" id="title" name="title" class="form-control" value="">

      <label for="year" class="form-label">Year:</label>
      <input type="number" id="year" name="year" class="form-control" value="">

      <label for="rating" class="form-label">Rating:</label>
      <input type="number" id="rating" name="rating" class="form-control" value="">

      <label for="director_id" class="form-label">Director:</label>
      <select class="form-select" aria-label="Default select example" id="director_id" name="director_id">
        <option selected></option>
        {% for director in directors %}
        <option value="{{ director.id }}">{{ director.first_name}} {{ director.last_name }}</option>
        {% endfor %}
      </select>

      <label for="screenplay_id" class="form-label">Screenplay:</label>
      <select class="form-select" aria-label="Default select example" id="screenplay_id" name="screenplay_id">
        <option selected></option>
        {% for screenwriter in screenwriters %}
        <option value="{{ screenwriter.id }}">{{ screenwriter.first_name}} {{ screenwriter.last_name }}</option>
        {% endfor %}
      </select>
      <br>
      <button type="submit" class="btn btn-primary">ADD MOVIE</button>
    </form>
  </div>
  {% endif %}
</div>


{% endblock %}
